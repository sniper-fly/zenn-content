---
title: "Remotely save × github × Quartz によるクラウド同期で快適&無料なObsidianホスティング"
emoji: "🤖"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [obsidian, quartz, remotelySave, githubActions]
published: false
---

Obsidian といえば、公式のクラウド同期サービスとして `Obsidian Sync`、
ホスティングは`Obsidian Publish`が有名ですが、どちらも月額で料金がかかります。

円安のご時世で毎月ドルで課金というのも中々ハードル高いですね。

そこで、無料で使えるコミュニティプラグイン、クラウド同期サービスとして `Remotely save`、
ホスティングは`Quartz`を使って代替しようと考えました。

# 前提

以下の2つができることが条件になります。
- [Quartz](https://quartz.jzhao.xyz/) でデプロイができる
- [RemotelySave](https://github.com/remotely-save/remotely-save) で同期ができる

上記2つの設定方法はは公式ページや別の利用者の方の説明記事があるので、当記事では説明しません。
`github actions`の設定方法が記事のメインの内容となります。

# 流れ

1. ローカルで編集
2. AWS S3 にデータをバックアップ
3. 毎日定時に github actions で S3 と同期して自動でコミット
4. `Quartz`でホスティングしているサイトに更新がかかる

2までの流れは通常の`Remotely Save`と同じで、そこから`github actions`で`Quartz`のデプロイ設定を行っているリポジトリにデータを同期して自動でコミットするイメージです。

# 方法

## Quartz でホスティングを行う
## Remotely save でクラウド同期を行う
## github actions の設定

# 経緯と以前のモヤモヤ
元々、`Quartz`と[obsidian-git](https://github.com/Vinzent03/obsidian-git)で
クラウド同期とホスティングを行っていましたが、`obsidian-git`ではコミット頻度が高すぎて
githubに不毛なコミット履歴が積み重なるのが嫌でした。
また、pushの回数も多くなりがちで、CIが過剰に動いてしまうというのも懸念事項でした。

かといって設定でpushの頻度を下げれば、クラウド同期が上手く行かない可能性も生じる、
ということで、`Remotely save`をローカルと`Quartz`の間に挟み、
それを`github actions`でつなげられないか、と考えたのがこの発想の経緯です。
この方法であればpcが起動していなくてもS3とgithubで同期が勝手に行われてくれます。

また、この方法を採用することでRemotely Saveの良い点は活用しつつ、
一日ごとにgithubで差分のスナップショットがとれ、過去ログを振り返ったり
1コミットが1日の作業に対応するため1週間の作業量などの可視化もできるというおまけつきです。

# memo

bot はその先の CI をキックしない
https://umihi.co/blog/20221019-run-gh-as-actual-user-instead-of-github-actions-bot-in-actions
